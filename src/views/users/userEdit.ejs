<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head.ejs') %> 
    <link rel="stylesheet" href="/css/register-style.css" type="text/css">
    <title>Bici Mundo-Edición</title>
    <script src="/js/passwordVisibility.js" defer></script>
</head>
<body>
    <%- include('../partials/header.ejs') %> 
    <main>
        <div class="register">
            <h2>EDITA TU CUENTA</h2>
            <form action="/usuarios/editar/<%= locals.user && user.id || idToUpdate %>?_method=PUT" method="POST" enctype="multipart/form-data" class="register-form">
                <div class="user-image">
                    <img src="/images/users/<%= user.image %>  " alt="">
                    <label for="user-image">Carga tú foto de perfil</label>
                    <span class="image-value"></span>
                    <input type="file" name="image" id="user-image" style="visibility: hidden;" accept=".jpg, .png" />
                    <small class="feedback"> <%= locals.errors && errors.image ? errors.image.msg : null %>  </small>
                </div>
                <div class="fill-form">
                    <diV class="form-control user-name">
                        <label for="id">Nombre:</label>
                        <input type="text" name="firstName" placeholder="John" required id="name" minLength="2" value="<%=locals.oldData && oldData.firstName || locals.user && user.firstName%>">
                        <i class="fa-solid fa-circle-check"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small class="feedback"> <%= locals.errors && errors.firstName ? errors.firstName.msg : null %> </small>
                    </diV>
                    <div class="form-control user-last-name">
                        <label for="last-name">Apellido:</label>
                        <input type="text" name="lastName" placeholder="Doe" required id="last-name" minLength="2" value="<%=locals.oldData && oldData.lastName || locals.user && user.lastName%>">
                        <i class="fa-solid fa-circle-check"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small class="feedback"> <%= locals.errors && errors.lastName ? errors.lastName.msg : null %> </small>
                    </div>
                    <div class="form-control user-date-of-birth">
                        <label for="date">Fecha de nacimiento:</label>
                        <input type="date" name="birthdate" required id="date" min="1900-01-01" max="2010-01-01" value="<%=locals.oldData && oldData.birthdate || locals.user && user.birthdate%>">
                        <i class="fa-solid fa-circle-check"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small class="feedback"> <%= locals.errors && errors.birthdate ? errors.birthdate.msg : null %> </small>
                    </div>
                    <div class="form-control user-email">
                        <label for="email">Email:</label>
                        <input type="email" name="email" placeholder="johndow@mail.com" required id="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" value="<%=locals.oldData && oldData.email || locals.user && user.email%>">
                        <i class="fa-solid fa-circle-check"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small class="feedback"> <%= locals.errors && errors.email ? errors.email.msg : null %> </small>
                    </div>
                    <div class="form-control user-password">
                        <label for="password">Nueva contraseña:</label>
                        <input type="password" name="password"  id="password" minLength="8">
                        <i class="fa-regular fa-eye"></i>
                        <i class="fa-regular fa-eye-slash"></i>
                        <small class="feedback"> <%= locals.errors && errors.password ? errors.password.msg : null %> </small>
                    </div>
                    <div class="form-control user-confirm-password">
                        <label for="confirm-password">Confirmar contraseña:</label>
                        <input type="password" name="user-confirm-password"  id="confirm-password" minLength="8">
                        <i class="fa-solid fa-circle-check"></i>
                        <i class="fas fa-exclamation-circle"></i>
                        <small class="feedback"> <%= locals.errors && errors["user-confirm-password"] ? errors["user-confirm-password"].msg : null %> </small>
                    </div>
                    <div class="form-control user-phone">
                        <label for="phone">Telefono (opcional):</label>
                        <input type="tel" name="phonenumber" placeholder="+54 911 5678 1234" id="phone" value="<%=locals.oldData && oldData.phonenumber || locals.user && user.phonenumber%>">
                        <small class="feedback"></small>
                    </div>
                </div>
                <div class="submit-form">
                    <button type="reset">Limpiar</button>    
                    <button type="submit">Confirmar</button>
                </div>
            </form>
        </div>
    </main>
    <%- include('../partials/footer.ejs') %> 
    <script src="/js/userEditValidation.js"></script>
    <script src="/js/searchBar.js"></script>
</body>
</html>